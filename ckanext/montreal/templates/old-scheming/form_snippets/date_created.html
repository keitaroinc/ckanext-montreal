{% import 'macros/form.html' as form %}
{% set date = (data.get(field.field_name + '_date') or data.get('created')) %}
{% set time = data.get(field.field_name + '_time') %}

{% if date is none and data.get('metadata_created')%}
{% set date = data.get('metadata_created').split('T')[0] %}
{% endif %}
{% if time is none and data.get('metadata_created')%}
{% set time = h.render_datetime(data.get('metadata_created'), date_format='%Y-%m-%d %H:%M').split()[1] %}
{% endif %}

{% if date %}
{% set parts = date.split('T') %}
{% set date = parts[0] %}
{% set time = parts[1] %}
{% endif %}

{% call form.input(
field.field_name + '_date',
id='field-' + field.field_name + '-date',
label= h.scheming_language_text(field.label),
type='date',
value=date,
error=errors[field.field_name + '_date'],
classes=['control-medium'],
attrs=dict({"class": "form-control"}, **(field.get('form_attrs', {}))),
is_required=h.scheming_field_required(field)
)
%}
{%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
{% endcall %}